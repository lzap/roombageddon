-- title:  game title
-- author: game developer
-- desc:   short description
-- script: lua

package.path = package.path .. ";./src/?.lua"

local SceneManager = require("scenes.scene_manager")
local IntroScene = require("scenes.intro")
local GameScene = require("scenes.game")
local GameOverScene = require("scenes.game_over")

G = {
	SM = {}
}

function BOOT()
	local intro = IntroScene.New()
	local game = GameScene.New()
	local gameOver = GameOverScene.New()

	G.SM = SceneManager.New()
	SceneManager.Add(G.SM, "intro", intro, {
		update = IntroScene.Update,
		draw = IntroScene.Draw
	})
	SceneManager.Add(G.SM, "game", game, {
		onEnter = GameScene.OnEnter,
		update = GameScene.Update,
		draw = GameScene.Draw
	})
	SceneManager.Add(G.SM, "game_over", gameOver, {
		update = GameOverScene.Update,
		draw = GameOverScene.Draw
	})
	SceneManager.Switch(G.SM, "intro")
end

function TIC()
	SceneManager.Update(G.SM)
	SceneManager.Draw(G.SM)
end

-- <TILES>
-- 001:ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
-- 016:ffffffffffff3ffffff33fffff3f3fffffff3fffffff3fffffffffffffffffff
-- 017:ffffffffff333fffff3f3fffff3f3ffffff3ffffff333fffffffffffffffffff
-- 018:ffffffffff333fffffff3ffffff33fffffff3fffff333fffffffffffffffffff
-- 019:ffffffffff3fffffff3fffffff333ffffff33fffffff3fffffff3fffffffffff
-- 032:cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
-- 033:cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
-- 034:cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
-- 035:cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
-- 064:ffffffffffff44fffff444ffff3f33ffffff33ffffff33ffffff33ffffffffff
-- 065:ffffffffff4444ffff4f44ffffff33fffff3ffffff3fffffff3333ffffffffff
-- 066:ffffffffff4444ffffff44fffff333fffff333ffffff33ffff3333ffffffffff
-- 067:ffffffffff4fffffff4fffffff3f33ffff3333ffffff33ffffff33ffffffffff
-- 080:ffffffffffff33fffff333ffff3f33ffffff33ffffff44ffffff44ffffffffff
-- 081:ffffffffff3333ffff3f33ffffff33fffff3ffffff4fffffff4444ffffffffff
-- 082:ffffffffff3333ffffff33fffff333fffff333ffffff44ffff4444ffffffffff
-- 083:ffffffffff3fffffff3fffffff3f33ffff3333ffffff44ffffff44ffffffffff
-- 096:ffffffffffff33fffff433ffff4f33ffffff33ffffff33ffffff33ffffffffff
-- 097:ffffffffff4433ffff4f33ffffff33fffff4ffffff4fffffff4433ffffffffff
-- 098:ffffffffff4433ffffff33fffff433fffff433ffffff33ffff4433ffffffffff
-- 099:ffffffffff4fffffff4fffffff4f33ffff4433ffffff33ffffff33ffffffffff
-- 112:ffffffffffff34fffff334ffff3f34ffffff34ffffff34ffffff34ffffffffff
-- 113:ffffffffff3334ffff3f34ffffff34fffff3ffffff3fffffff3334ffffffffff
-- 114:ffffffffff3334ffffff34fffff334fffff334ffffff34ffff3334ffffffffff
-- 115:ffffffffff3fffffff3fffffff3f34ffff3334ffffff34ffffff34ffffffffff
-- </TILES>

-- <SPRITES>
-- 000:cccccc77cccccc76c6556c75c4544776c4454775c6556c76cccccc75cccccc77
-- 001:cccccc77cccccc75c6556c76c4544775c4454776c6556c75cccccc76cccccc77
-- </SPRITES>

-- <MAP>
-- 001:001010101000000000000000000000000000000000000000001710101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 002:001000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 003:001000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 004:000400000000000000000000000000000000000000000000000000001000000000000007101010101000000000000000001010101010160000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 005:000000000000000000000000000000000000000000000000000000000000000000000000000000001010101000001010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 006:000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 008:000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 009:000000000000000000000000000000000000000000000000000000000000000000000000000000001010101000001010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 010:000000000000000000000000000000000000000000000000000000000000000000000037101010101000000000000000001010101010260000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 012:001000000000000000000000000000000000000000000000000000002500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 013:001000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 014:001000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 015:001010103600000000000000000000000000000000000000001010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- </MAP>

-- <FLAGS>
-- 000:10200000000000000000000000000000202020200000000000000000000000001010101000000000000000000000000000000000000000000000000000000000202020200000000000000000000000002020202000000000000000000000000020202020000000000000000000000000202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- </FLAGS>

-- <PALETTE>
-- 000:1a1c2c5d275db13e53ef7d57ffcd75a7f07038b76425717929366f3b5dc941a6f673eff7f4f4f494b0c2566c86333c57
-- </PALETTE>

